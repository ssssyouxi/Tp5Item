(function(e){function t(t,o){return e(t).toggle().css(o.corner,-1*e(t).outerWidth()).css({position:"fixed",bottom:0}).bind("slideIn",function(e){n(e,t,o)}).bind("slideOut",function(e){r(e,t,o)}),i(t,o),s(t,o),e(t)}function n(t,n,r){var i=r.corner==="right"?{right:0}:{left:0};e(n).show().animate(i,1e3,"swing")}function r(t,n,r){var i=r.corner==="right"?{right:-1*e(n).outerWidth()}:{left:-1*e(n).outerWidth()};e(n).animate(i,1e3,"swing",function(){e.slideNoteCount===1?e(n).stop(!0).hide():e(n).hide()}),r.closeImage!==null&&t.target.id===e(n).attr("id")+"_close"&&(r.bIsClosed=!0)}function i(t,n){if(n.url!==null){n.container.length!==0&&n.container.indexOf("#")===-1&&(n.container="#"+n.container);var r=n.container.length===0?n.url:n.url+" "+n.container;e(t).load(r,function(){n.closeImage!==null&&s(t,n)})}}function s(t,n){if(n.closeImage!==null){var r=document.createElement("img");e(r).attr("src",n.closeImage).attr("alt","close").css("float","right").attr("id",e(t).attr("id")+"_close").hover(function(){e(this).css("cursor","pointer")}).click(function(t){t.stopPropagation(),e(this).trigger("slideOut")}),e(t).prepend(r)}}e.slideNoteCount=0,e.fn.slideNote=function(n){e.slideNoteCount+=this.length;var r=e.extend({},e.fn.slideNote.defaults,e.fn.slideNote.private,n);return this.each(function(){var n=t(this,r),i=e.browser.msie===!0?window:document;e(i).scroll(function(){e(this).scrollTop()===0&&(r.bIsClosed=!1),e(this).scrollTop()>r.where?!n.is(":visible")&&!r.bIsClosed&&n.trigger("slideIn"):e(this).scrollTop()<r.where&&n.queue("fx")[0]!=="inprogress"&&n.is(":visible")&&n.trigger("slideOut")})})},e.fn.slideNote.defaults={where:640,corner:"right",url:null,container:"",closeImage:null},e.fn.slideNote.private={_bIsClosed:!1}})(jQuery)